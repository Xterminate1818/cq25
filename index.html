<!DOCTYPE html>
<html>
<head>
<style>
#cy {
  position: relative;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  display: "block";
}
</style>

<script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.5.7/shim.min.js"></script>
<script src="https://unpkg.com/layout-base/layout-base.js"></script>
<script src="https://unpkg.com/cose-base/cose-base.js"></script>
<script src="https://unpkg.com/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"></script>

<script>
async function draw_graph(json) {
  var cy = cytoscape({
    container: document.getElementById('cy'), // container to render in
    elements: json,
    style: [
      {
        selector: 'node',
        style: {
          'background-color': '#333',
          'color': '#fff',
          'padding': '2em',
          'text-halign':'center',
          'text-valign':'center',
          'shape':'ellipse',
          'text-wrap': 'wrap'
        }
      },

      {
        selector: 'edge',
        style: {
          'width': 10,
          'line-color': '#ff0000',
          'target-arrow-color': '#ff0000',
          'edge-target-arrow-size': '8.0',
          'target-arrow-shape': 'triangle',
          'curve-style': 'bezier'
        }
      }
    ],
    layout: {
      name: 'cose-bilkent',
    }
  });
}
</script>
</head>
<body>
  <h1> Network Visualizer </h1>
  <form id="url-form" style="z-index=10;">
    <input type="text" name="url" id="input-field"> </input>
    <input type="submit"> </input>
  </form>
  <div>
    <div id="cy">
    </div>
  </div>
  <script>
  const form_element = document.getElementById("url-form");
  const input_element = document.getElementById("input-field");
  form_element.addEventListener("submit", async function(event) {
    event.preventDefault();
    let json_url = `/api/${input_element.value}`;
    console.log(json_url);
    const response = await fetch(json_url);
    console.log(response);
    const json = await response.json();
    console.log(json);
    draw_graph(json);
  });
  </script>
</body>
</html>


